---
import BaseLayout from '../layouts/BaseLayout.astro';
import Nav from '../sections/Nav.astro';
import Hero from '../sections/Hero.astro';
import TheProblem from '../sections/TheProblem.astro';
import HowItWorks from '../sections/HowItWorks.astro';
import WhyItMatters from '../sections/WhyItMatters.astro';
import VideoDemo from '../sections/VideoDemo.astro';
import Analytics from '../sections/Analytics.astro';
import OpenSource from '../sections/OpenSource.astro';
import CLI from '../sections/CLI.astro';
import CloudWaitlist from '../sections/CloudWaitlist.astro';
import GetStarted from '../sections/GetStarted.astro';
import Footer from '../sections/Footer.astro';
import BeforeAfter from '../islands/BeforeAfter';
import PipelineDemo from '../islands/PipelineDemo';
import AnalyticsShowcase from '../islands/AnalyticsShowcase';
---

<BaseLayout>
  <Nav />

  <main>
    <Hero />

    <TheProblem />
    <BeforeAfter client:visible />

    <HowItWorks />
    <WhyItMatters />

    <VideoDemo />
    <PipelineDemo client:visible />

    <Analytics />
    <div class="max-w-7xl mx-auto px-6 -mt-8 mb-24">
      <AnalyticsShowcase client:visible />
    </div>

    <OpenSource />

    <CLI />

    <CloudWaitlist />

    <GetStarted />
  </main>

  <Footer />
</BaseLayout>

<script>
  // Scroll reveal using IntersectionObserver
  const revealElements = document.querySelectorAll('section');
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.1 }
  );

  revealElements.forEach((el) => {
    el.classList.add('reveal');
    observer.observe(el);
  });
</script>
